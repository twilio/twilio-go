/*
 * This code was generated by
 * ___ _ _ _ _ _    _ ____    ____ ____ _    ____ ____ _  _ ____ ____ ____ ___ __   __
 *  |  | | | | |    | |  | __ |  | |__| | __ | __ |___ |\ | |___ |__/ |__|  | |  | |__/
 *  |  |_|_| | |___ | |__|    |__| |  | |    |__] |___ | \| |___ |  \ |  |  | |__| |  \
 *
 * User OAuth API
 * User OAuth API
 *
 * NOTE: This class is auto generated by OpenAPI Generator.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package openapi

import (
	"encoding/json"
	"net/url"

	"github.com/twilio/twilio-go/client/metadata"
)

// Optional parameters for the method 'FetchOauth2Authorize'
type FetchOauth2AuthorizeParams struct {
	//
	ResponseType *string `json:"response_type,omitempty"`
	//
	ClientId *string `json:"client_id,omitempty"`
	//
	RedirectUri *string `json:"redirect_uri,omitempty"`
	//
	Scope *string `json:"scope,omitempty"`
	//
	State *string `json:"state,omitempty"`
}

func (params *FetchOauth2AuthorizeParams) SetResponseType(ResponseType string) *FetchOauth2AuthorizeParams {
	params.ResponseType = &ResponseType
	return params
}
func (params *FetchOauth2AuthorizeParams) SetClientId(ClientId string) *FetchOauth2AuthorizeParams {
	params.ClientId = &ClientId
	return params
}
func (params *FetchOauth2AuthorizeParams) SetRedirectUri(RedirectUri string) *FetchOauth2AuthorizeParams {
	params.RedirectUri = &RedirectUri
	return params
}
func (params *FetchOauth2AuthorizeParams) SetScope(Scope string) *FetchOauth2AuthorizeParams {
	params.Scope = &Scope
	return params
}
func (params *FetchOauth2AuthorizeParams) SetState(State string) *FetchOauth2AuthorizeParams {
	params.State = &State
	return params
}

func (c *ApiService) FetchOauth2Authorize(params *FetchOauth2AuthorizeParams) (*OauthV2Authorize, error) {
	path := "/v2/authorize"

	data := url.Values{}
	headers := map[string]interface{}{
		"Content-Type": "application/x-www-form-urlencoded",
	}

	if params != nil && params.ResponseType != nil {
		data.Set("response_type", *params.ResponseType)
	}
	if params != nil && params.ClientId != nil {
		data.Set("client_id", *params.ClientId)
	}
	if params != nil && params.RedirectUri != nil {
		data.Set("redirect_uri", *params.RedirectUri)
	}
	if params != nil && params.Scope != nil {
		data.Set("scope", *params.Scope)
	}
	if params != nil && params.State != nil {
		data.Set("state", *params.State)
	}

	resp, err := c.requestHandler.Get(c.baseURL+path, data, headers)
	if err != nil {
		return nil, err
	}

	defer resp.Body.Close()

	ps := &OauthV2Authorize{}
	if err := json.NewDecoder(resp.Body).Decode(ps); err != nil {
		return nil, err
	}

	return ps, err
}

// FetchOauth2AuthorizeWithMetadata returns response with metadata like status code and response headers
func (c *ApiService) FetchOauth2AuthorizeWithMetadata(params *FetchOauth2AuthorizeParams) (*metadata.ResourceMetadata[OauthV2Authorize], error) {
	path := "/v2/authorize"

	data := url.Values{}
	headers := map[string]interface{}{
		"Content-Type": "application/x-www-form-urlencoded",
	}

	if params != nil && params.ResponseType != nil {
		data.Set("response_type", *params.ResponseType)
	}
	if params != nil && params.ClientId != nil {
		data.Set("client_id", *params.ClientId)
	}
	if params != nil && params.RedirectUri != nil {
		data.Set("redirect_uri", *params.RedirectUri)
	}
	if params != nil && params.Scope != nil {
		data.Set("scope", *params.Scope)
	}
	if params != nil && params.State != nil {
		data.Set("state", *params.State)
	}

	resp, err := c.requestHandler.Get(c.baseURL+path, data, headers)
	if err != nil {
		return nil, err
	}

	defer resp.Body.Close()

	ps := &OauthV2Authorize{}
	if err := json.NewDecoder(resp.Body).Decode(ps); err != nil {
		return nil, err
	}

	metadataWrapper := metadata.NewResourceMetadata[OauthV2Authorize](
		*ps,             // The resource object
		resp.StatusCode, // HTTP status code
		resp.Header,     // HTTP headers
	)

	return metadataWrapper, nil
}
